<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Allows the easy and semi-automated checking, validation, and exploration
    of camera trap data collected according to BC RISC standards, and tagged using 
    TimeLapse software.">
<title>Tools for QA and validation of Camera Trap data • bccamtrap</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Tools for QA and validation of Camera Trap data">
<meta property="og:description" content="Allows the easy and semi-automated checking, validation, and exploration
    of camera trap data collected according to BC RISC standards, and tagged using 
    TimeLapse software.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">bccamtrap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ateucher/bccamtrap/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="bccamtrap">bccamtrap<a class="anchor" aria-label="anchor" href="#bccamtrap"></a>
</h1></div>
<!-- badges: start -->

<p>Functions for QA and validation of Camera Trap data</p>
<ol style="list-style-type: decimal">
<li><a href="#installation">Installation</a></li>
<li>
<a href="#example-usage">Example Usage</a>
<ol style="list-style-type: decimal">
<li><a href="#project-and-station-metadata">Project and station metadata</a></li>
<li><a href="#project-metadata-field-form-csv-files">Project Metadata: Field Form CSV files</a></li>
<li><a href="#image-data">Image data</a></li>
<li><a href="#built-in-plotting-functions">Built-in plotting functions</a></li>
<li><a href="#sampling-sessions">Sampling sessions</a></li>
<li><a href="#analysis-data">Analysis data</a></li>
<li><a href="#write-data-to-spi-template">Write Data to SPI template</a></li>
</ol>
</li>
</ol>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of bccamtrap from <a href="https://github.com/" class="external-link">GitHub</a> using the <a href="https://devtools.r-lib.org/" class="external-link">devtools</a> package (you may need to install it first):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"bcgov/bccamtrap"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-usage">Example Usage<a class="anchor" aria-label="anchor" href="#example-usage"></a>
</h2>
<p>This package is being developed for camera trap studies in the West Coast Region, BC Ministry of Water, Land, and Resource Stewardship (WLRS).</p>
<p>The functions in this package currently assume your project and session-level data are stored in a BC Government <a href="https://www2.gov.bc.ca/gov/content?id=DC67BCBF8B1E462889B854364364D2D1" class="external-link">Wildlife Data Submission Template</a> for Camera Trap Data, augmented with additional fields.</p>
<p>The image data is expected to be in multiple csv files, in one folder per project. The csv files have been generated by reviewing the images in <a href="https://saul.cpsc.ucalgary.ca/timelapse/" class="external-link">TimeLapse</a> software, using the template <code>v20230518</code>.</p>
<p><strong>Note that example data has been obfuscated to protect the location of the projects.</strong></p>
<p>To begin, set the paths to the project metadata file, and the folder containing the TimeLapse image files:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ateucher/bccamtrap" class="external-link">bccamtrap</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">metadata_path</span> <span class="op">&lt;-</span> <span class="st">"~/data/project-files/project_1_RISC_WCR_Database_Template_v20230518.xlsm"</span></span>
<span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="st">"~/data/wc-wlrs-cam-data/camera-data/project_1/"</span></span></code></pre></div>
<div class="section level3">
<h3 id="project-and-station-metadata">Project and station metadata<a class="anchor" aria-label="anchor" href="#project-and-station-metadata"></a>
</h3>
<p>Read in project metadata from the SPI worksheet. There are functions to read the relevant tabs:</p>
<div class="section level4">
<h4 id="project-information">Project Information<a class="anchor" aria-label="anchor" href="#project-information"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">proj</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_project_info.html">read_project_info</a></span><span class="op">(</span><span class="va">metadata_path</span><span class="op">)</span></span>
<span><span class="va">proj</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 4</span></span>
<span><span class="co">#&gt;   spi_project_id project_name                  survey_name survey_intensity_code</span></span>
<span><span class="co">#&gt; * &lt;chr&gt;          &lt;chr&gt;                         &lt;chr&gt;       &lt;chr&gt;                </span></span>
<span><span class="co">#&gt; 1 &lt;NA&gt;           2022 - ongoing - Roosevelt E… 2022-2023 … &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="sample-station-information">Sample station information<a class="anchor" aria-label="anchor" href="#sample-station-information"></a>
</h4>
<p>Read the sample station information. This creates a spatial data frame of class <code>"sf"</code>, from the <a href="https://r-spatial.github.io/sf/" class="external-link">sf</a> package. This format allows us to work with it as a regular data frame, but also do spatial things with it.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sample_stations</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_sample_station_info.html">read_sample_station_info</a></span><span class="op">(</span><span class="va">metadata_path</span><span class="op">)</span></span>
<span><span class="va">sample_stations</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co">#&gt; Simple feature collection with 21 features and 29 fields</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co">#&gt; Geometry type: POINT</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="co">#&gt; Dimension:     XY</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="co">#&gt; Bounding box:  xmin: -125.8534 ymin: 53.6787 xmax: -125.0136 ymax: 53.73782</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="co">#&gt; # A tibble: 21 × 24</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="co">#&gt;    wlrs_project_name      study_area_name study_area_photos sample_station_label</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                  &lt;chr&gt;           &lt;chr&gt;             &lt;chr&gt;               </span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="co">#&gt;  1 2022 - ongoing - Roos… Test Project    Y                 19_1                </span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="co">#&gt;  2 2022 - ongoing - Roos… Test Project    Y                 19_2                </span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co">#&gt;  3 2022 - ongoing - Roos… Test Project    Y                 20                  </span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="co">#&gt;  4 2022 - ongoing - Roos… Test Project    Y                 21_1                </span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">#&gt;  5 2022 - ongoing - Roos… Test Project    Y                 21_2                </span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="co">#&gt;  6 2022 - ongoing - Roos… Test Project    Y                 24                  </span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="co">#&gt;  7 2022 - ongoing - Roos… Test Project    Y                 25                  </span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="co">#&gt;  8 2022 - ongoing - Roos… Test Project    Y                 26                  </span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="co">#&gt;  9 2022 - ongoing - Roos… Test Project    Y                 27                  </span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="co">#&gt; 10 2022 - ongoing - Roos… Test Project    Y                 28                  </span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="co">#&gt; # ℹ 11 more rows</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="co">#&gt; # ℹ 20 more variables: station_status &lt;chr&gt;, number_of_cameras &lt;dbl&gt;,</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a><span class="co">#&gt; #   set_date &lt;dttm&gt;, general_location &lt;chr&gt;, elevation_m &lt;dbl&gt;,</span></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a><span class="co">#&gt; #   slope_percent &lt;dbl&gt;, aspect_degrees &lt;dbl&gt;, crown_closure_percent &lt;dbl&gt;,</span></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a><span class="co">#&gt; #   camera_bearing_degrees &lt;dbl&gt;, camera_height_cm &lt;dbl&gt;,</span></span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a><span class="co">#&gt; #   distance_to_feature_m &lt;dbl&gt;, visible_range_m &lt;dbl&gt;, habitat_feature &lt;chr&gt;,</span></span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a><span class="co">#&gt; #   lock &lt;chr&gt;, code &lt;chr&gt;, sample_station_comments &lt;chr&gt;, …</span></span></code></pre></div>
<p>Use the <code><a href="reference/qa_stations_spatial.html">qa_stations_spatial()</a></code> function to run some basic spatial validation on the data - namely checking for spatial outliers:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sample_stations</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/qa_stations_spatial.html">qa_stations_spatial</a></span><span class="op">(</span><span class="va">sample_stations</span><span class="op">)</span></span>
<span><span class="co">#&gt; ! Station 19_1 appears to be very far away from other stations. Please check</span></span>
<span><span class="co">#&gt; its coordinates.</span></span></code></pre></div>
<p>Use the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method for Sample Station Info for basic descriptive stats:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">sample_stations</span><span class="op">)</span></span>
<span><span class="co">#&gt; ┌ Test Project ───────┐</span></span>
<span><span class="co">#&gt; │                     │</span></span>
<span><span class="co">#&gt; │   Sample Stations   │</span></span>
<span><span class="co">#&gt; │                     │</span></span>
<span><span class="co">#&gt; └─────────────────────┘</span></span>
<span><span class="co">#&gt; ℹ 18 sample stations in 21 locations.</span></span>
<span><span class="co">#&gt; ℹ Summary of station distances (m):</span></span>
<span><span class="co">#&gt;     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. </span></span>
<span><span class="co">#&gt;     5.08  4247.81  8712.00 11935.96 14562.39 55516.29</span></span>
<span><span class="co">#&gt; ✖ Detected 1 potential spatial outlier.</span></span>
<span><span class="co">#&gt; ℹ Station status summary:</span></span>
<span><span class="co">#&gt; Camera Active  Camera Moved </span></span>
<span><span class="co">#&gt;            18             3</span></span>
<span><span class="co">#&gt; ℹ Set dates: Between 2022-11-07 and 2023-11-16</span></span>
<span><span class="co">#&gt; ! Run `map_stations(object)` to view stations on a map.</span></span></code></pre></div>
<p>Use the <code><a href="reference/map_stations.html">map_stations()</a></code> function to create an interactive map the of the stations. This will show any potential outlying stations, indicating possible data errors:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/map_stations.html">map_stations</a></span><span class="op">(</span><span class="va">sample_stations</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-map-stations-1.png" width="100%"></p>
</div>
<div class="section level4">
<h4 id="camera-information">Camera Information:<a class="anchor" aria-label="anchor" href="#camera-information"></a>
</h4>
<p>Read camera information using <code><a href="reference/read_camera_info.html">read_camera_info()</a></code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">camera_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_camera_info.html">read_camera_info</a></span><span class="op">(</span><span class="va">metadata_path</span><span class="op">)</span></span>
<span><span class="va">camera_info</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co">#&gt; Simple feature collection with 21 features and 14 fields</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co">#&gt; Geometry type: POINT</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="co">#&gt; Dimension:     XY</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co">#&gt; Bounding box:  xmin: -125.5219 ymin: 49.28703 xmax: -125.2213 ymax: 49.34728</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co">#&gt; # A tibble: 21 × 9</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="co">#&gt;    wlrs_project_name         study_area_name parent_sample_statio…¹ camera_label</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                     &lt;chr&gt;           &lt;chr&gt;                  &lt;chr&gt;       </span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="co">#&gt;  1 2022 - ongoing - Rooseve… Test Project    19_1                   UBC 2       </span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="co">#&gt;  2 2022 - ongoing - Rooseve… Test Project    19_2                   UBC 1       </span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="co">#&gt;  3 2022 - ongoing - Rooseve… Test Project    20                     Eco1059     </span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="co">#&gt;  4 2022 - ongoing - Rooseve… Test Project    21_1                   Eco1057     </span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="co">#&gt;  5 2022 - ongoing - Rooseve… Test Project    21_2                   Eco7998     </span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a><span class="co">#&gt;  6 2022 - ongoing - Rooseve… Test Project    24                     Eco1050     </span></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a><span class="co">#&gt;  7 2022 - ongoing - Rooseve… Test Project    25                     Eco1040     </span></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a><span class="co">#&gt;  8 2022 - ongoing - Rooseve… Test Project    26                     Eco7939     </span></span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a><span class="co">#&gt;  9 2022 - ongoing - Rooseve… Test Project    27                     Eco6690     </span></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a><span class="co">#&gt; 10 2022 - ongoing - Rooseve… Test Project    28                     UBC 4       </span></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a><span class="co">#&gt; # ℹ 11 more rows</span></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a><span class="co">#&gt; # ℹ abbreviated name: ¹​parent_sample_station_label</span></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a><span class="co">#&gt; # ℹ 5 more variables: make_of_camera_code &lt;chr&gt;, model_of_camera &lt;chr&gt;,</span></span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a><span class="co">#&gt; #   camera_comments &lt;chr&gt;, site_description_comments &lt;chr&gt;,</span></span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a><span class="co">#&gt; #   site_description_date &lt;dttm&gt;</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="camera-setup-and-checks">Camera Setup and Checks:<a class="anchor" aria-label="anchor" href="#camera-setup-and-checks"></a>
</h4>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">camera_setup_checks</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_cam_setup_checks.html">read_cam_setup_checks</a></span><span class="op">(</span><span class="va">metadata_path</span><span class="op">)</span></span>
<span><span class="va">camera_setup_checks</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co">#&gt; # A tibble: 43 × 31</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co">#&gt;    wlrs_project_name       study_area_name sample_station_label deployment_label</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                   &lt;chr&gt;           &lt;chr&gt;                &lt;chr&gt;           </span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co">#&gt;  1 2022 - ongoing - Roose… Test Project    19_1                 &lt;NA&gt;            </span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="co">#&gt;  2 2022 - ongoing - Roose… Test Project    19_2                 &lt;NA&gt;            </span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#&gt;  3 2022 - ongoing - Roose… Test Project    20                   &lt;NA&gt;            </span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="co">#&gt;  4 2022 - ongoing - Roose… Test Project    21_1                 &lt;NA&gt;            </span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co">#&gt;  5 2022 - ongoing - Roose… Test Project    21_2                 &lt;NA&gt;            </span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="co">#&gt;  6 2022 - ongoing - Roose… Test Project    24                   &lt;NA&gt;            </span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="co">#&gt;  7 2022 - ongoing - Roose… Test Project    25                   &lt;NA&gt;            </span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="co">#&gt;  8 2022 - ongoing - Roose… Test Project    26                   &lt;NA&gt;            </span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="co">#&gt;  9 2022 - ongoing - Roose… Test Project    27                   &lt;NA&gt;            </span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="co">#&gt; 10 2022 - ongoing - Roose… Test Project    28                   &lt;NA&gt;            </span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a><span class="co">#&gt; # ℹ 33 more rows</span></span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a><span class="co">#&gt; # ℹ 27 more variables: camera_label &lt;chr&gt;, surveyors &lt;chr&gt;,</span></span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a><span class="co">#&gt; #   date_time_checked &lt;dttm&gt;, sampling_start &lt;dttm&gt;, sampling_end &lt;dttm&gt;,</span></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a><span class="co">#&gt; #   total_visit_or_deployment_time &lt;dbl&gt;, unit_of_total_time_code &lt;chr&gt;,</span></span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a><span class="co">#&gt; #   visit_type &lt;chr&gt;, camera_status_on_arrival &lt;chr&gt;, battery_level &lt;chr&gt;,</span></span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a><span class="co">#&gt; #   batteries_changed &lt;chr&gt;, number_of_photos &lt;dbl&gt;, quiet_period_s &lt;chr&gt;,</span></span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a><span class="co">#&gt; #   trigger_sensitivity &lt;chr&gt;, trigger_timing_s &lt;dbl&gt;, …</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="deployments">Deployments<a class="anchor" aria-label="anchor" href="#deployments"></a>
</h4>
<p>Rather than just looking at the raw camera setup and checks or stations, there is more utility in assembling sampling deployments by combining the sample station information and the camera setup and checks. Do this with the <code><a href="reference/make_deployments.html">make_deployments()</a></code> function.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">deployments</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/make_deployments.html">make_deployments</a></span><span class="op">(</span><span class="va">metadata_path</span><span class="op">)</span></span>
<span><span class="va">deployments</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co">#&gt; Simple feature collection with 28 features and 62 fields</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="co">#&gt; Geometry type: POINT</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="co">#&gt; Dimension:     XY</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co">#&gt; Bounding box:  xmin: -130.3966 ymin: 52.92087 xmax: -129.569 ymax: 52.96732</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co">#&gt; # A tibble: 28 × 57</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="co">#&gt;    wlrs_project_name       study_area_name sample_station_label deployment_label</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                   &lt;chr&gt;           &lt;chr&gt;                &lt;chr&gt;           </span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="co">#&gt;  1 2022 - ongoing - Roose… Test Project    19_1                 19_1_20230605   </span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="co">#&gt;  2 2022 - ongoing - Roose… Test Project    19_2                 19_2_20230605   </span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="co">#&gt;  3 2022 - ongoing - Roose… Test Project    20                   20_20230605     </span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="co">#&gt;  4 2022 - ongoing - Roose… Test Project    21_1                 21_20230605     </span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="co">#&gt;  5 2022 - ongoing - Roose… Test Project    21_2                 21_2_20230605   </span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="co">#&gt;  6 2022 - ongoing - Roose… Test Project    24                   24_20230708     </span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a><span class="co">#&gt;  7 2022 - ongoing - Roose… Test Project    25                   25_20230710     </span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a><span class="co">#&gt;  8 2022 - ongoing - Roose… Test Project    26                   26_20230710     </span></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a><span class="co">#&gt;  9 2022 - ongoing - Roose… Test Project    27                   27_20230605     </span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a><span class="co">#&gt; 10 2022 - ongoing - Roose… Test Project    28                   28_20230605     </span></span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a><span class="co">#&gt; # ℹ 18 more rows</span></span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a><span class="co">#&gt; # ℹ 53 more variables: camera_label &lt;chr&gt;, surveyors &lt;chr&gt;,</span></span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a><span class="co">#&gt; #   date_time_checked &lt;dttm&gt;, sampling_end &lt;dttm&gt;,</span></span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a><span class="co">#&gt; #   total_visit_or_deployment_time &lt;dbl&gt;, unit_of_total_time_code &lt;chr&gt;,</span></span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a><span class="co">#&gt; #   visit_type &lt;chr&gt;, camera_status_on_arrival &lt;chr&gt;, battery_level &lt;chr&gt;,</span></span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a><span class="co">#&gt; #   batteries_changed &lt;chr&gt;, number_of_photos &lt;dbl&gt;, quiet_period_s &lt;chr&gt;,</span></span>
<span id="cb14-25"><a href="#cb14-25" tabindex="-1"></a><span class="co">#&gt; #   trigger_sensitivity &lt;chr&gt;, trigger_timing_s &lt;dbl&gt;, …</span></span></code></pre></div>
<p>There is a handy <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method for this as well:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">deployments</span><span class="op">)</span></span>
<span><span class="co">#&gt; ┌ Test Project ───┐</span></span>
<span><span class="co">#&gt; │                 │</span></span>
<span><span class="co">#&gt; │   Deployments   │</span></span>
<span><span class="co">#&gt; │                 │</span></span>
<span><span class="co">#&gt; └─────────────────┘</span></span>
<span><span class="co">#&gt; ℹ 15 sample stations in 28 deploymentss.</span></span>
<span><span class="co">#&gt; ℹ Deployment lengths range between 113 and 245 days.</span></span>
<span><span class="co">#&gt; ℹ Camera status on arrival summary:</span></span>
<span><span class="co">#&gt; Active </span></span>
<span><span class="co">#&gt;     28</span></span>
<span><span class="co">#&gt; ℹ There are 19201 images. Photos per deployment range betwen 189 and 3554.</span></span></code></pre></div>
<p>We can use the <a href="https://r-spatial.github.io/mapview/" class="external-link">mapview</a> package to quickly visualize this, setting the <code>zcol</code> argument to the name of the column you’d like to colour the points by. Clicking on a point will give you the details of that deployment.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/mapview" class="external-link">mapview</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html" class="external-link">mapview</a></span><span class="op">(</span><span class="va">deployments</span>, zcol <span class="op">=</span> <span class="st">"sample_station_label"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-mapview-deployments-1.png" width="100%"></p>
</div>
</div>
<div class="section level3">
<h3 id="project-metadata-field-form-csv-files">Project Metadata: Field Form CSV files<a class="anchor" aria-label="anchor" href="#project-metadata-field-form-csv-files"></a>
</h3>
<p>There are also two functions for reading in the different csv outputs from the field forms: Sample Stations, and Deployments:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sample_station_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_sample_station_csv.html">read_sample_station_csv</a></span><span class="op">(</span><span class="st">"path-to-sample-stations.csv"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">deployments</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_deployments_csv.html">read_deployments_csv</a></span><span class="op">(</span><span class="st">"path-to-deployments.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="image-data">Image data<a class="anchor" aria-label="anchor" href="#image-data"></a>
</h3>
<p>We can read in an entire directory of image data from multiple csv files, as long as they all follow the same TimeLapse template. Currently it is expected that they follow the <code>v20230518</code> template.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">image_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_image_data.html">read_image_data</a></span><span class="op">(</span><span class="va">data_path</span><span class="op">)</span></span>
<span><span class="va">image_data</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co">#&gt; # A tibble: 11,833 × 43</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="co">#&gt;    root_folder study_area_name sample_station_label deployment_label</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;           &lt;chr&gt;                &lt;chr&gt;           </span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="co">#&gt;  1 100RECNX    Test Project    19_1                 19_1_20230605   </span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="co">#&gt;  2 100RECNX    Test Project    19_1                 19_1_20230605   </span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="co">#&gt;  3 100RECNX    Test Project    19_1                 19_1_20230605   </span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="co">#&gt;  4 100RECNX    Test Project    19_1                 19_1_20230605   </span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a><span class="co">#&gt;  5 100RECNX    Test Project    19_1                 19_1_20230605   </span></span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a><span class="co">#&gt;  6 100RECNX    Test Project    19_1                 19_1_20230605   </span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a><span class="co">#&gt;  7 100RECNX    Test Project    19_1                 19_1_20230605   </span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a><span class="co">#&gt;  8 100RECNX    Test Project    19_1                 19_1_20230605   </span></span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a><span class="co">#&gt;  9 100RECNX    Test Project    19_1                 19_1_20230605   </span></span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a><span class="co">#&gt; 10 100RECNX    Test Project    19_1                 19_1_20230605   </span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a><span class="co">#&gt; # ℹ 11,823 more rows</span></span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a><span class="co">#&gt; # ℹ 39 more variables: date_time &lt;dttm&gt;, episode &lt;chr&gt;, species &lt;chr&gt;,</span></span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a><span class="co">#&gt; #   total_count_episode &lt;dbl&gt;, obj_count_image &lt;int&gt;, adult_male &lt;int&gt;,</span></span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a><span class="co">#&gt; #   adult_female &lt;int&gt;, adult_unclassified_sex &lt;int&gt;, yearling_male &lt;int&gt;,</span></span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a><span class="co">#&gt; #   yearling_female &lt;int&gt;, yearling_unclassified_sex &lt;int&gt;,</span></span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a><span class="co">#&gt; #   young_of_year_unclassified_sex &lt;int&gt;, juvenile_unclassified_sex &lt;int&gt;,</span></span>
<span id="cb20-20"><a href="#cb20-20" tabindex="-1"></a><span class="co">#&gt; #   male_unclassified_age &lt;int&gt;, female_unclassified_age &lt;int&gt;, …</span></span></code></pre></div>
<p>Again, we can use the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method to get an overview of the image data.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">image_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; ┌ Test Project ─────┐</span></span>
<span><span class="co">#&gt; │                   │</span></span>
<span><span class="co">#&gt; │   Image summary   │</span></span>
<span><span class="co">#&gt; │                   │</span></span>
<span><span class="co">#&gt; └───────────────────┘</span></span>
<span><span class="co">#&gt; ℹ 11833 images in 17 deployments at 15 sample stations.</span></span>
<span><span class="co">#&gt; ℹ Image counts by trigger mode:</span></span>
<span><span class="co">#&gt; Motion Detection       Time Lapse </span></span>
<span><span class="co">#&gt;             8657             3176</span></span>
<span><span class="co">#&gt; ℹ 117 images with lens obscured.</span></span>
<span><span class="co">#&gt; ℹ 4 images starred.</span></span>
<span><span class="co">#&gt; ! 4 images flagged for review.</span></span>
<span><span class="co">#&gt; ℹ Dates are between 2022-11-07 and 2023-07-10.</span></span>
<span><span class="co">#&gt; ℹ Temperatures are between -10 and 37 C.</span></span>
<span><span class="co">#&gt; ℹ Snow depths are between 0 and 135 cm.</span></span>
<span><span class="co">#&gt; ℹ Species counts:</span></span>
<span><span class="co">#&gt; Avian (comments)       Black Bear           Cougar        Mule Deer </span></span>
<span><span class="co">#&gt;                6              130               12              155 </span></span>
<span><span class="co">#&gt; Other (comments)   Pacific Marten     Red Squirrel    Roosevelt Elk </span></span>
<span><span class="co">#&gt;                1                2                1               88 </span></span>
<span><span class="co">#&gt;             &lt;NA&gt; </span></span>
<span><span class="co">#&gt;            11438</span></span>
<span><span class="co">#&gt; ! Run `qa_deployment_images()` to crosscheck images with deployments.</span></span>
<span><span class="co">#&gt; ! Run `qa_image_data()` to run various QA checks.</span></span></code></pre></div>
<p>Use the <code><a href="reference/qa_deployment_images.html">qa_deployment_images()</a></code> function to find deployment labels that are in the deployment data but not in the image data, and vice-versa. It is usually likely that there will be deployment labels in the deployment data that are missing from the image data if not all of the images have been processed yet. Deployment labels that are present in the image data but not in the deployment data indicate a potential problem.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/qa_deployment_images.html">qa_deployment_images</a></span><span class="op">(</span><span class="va">deployments</span>, <span class="va">image_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; ! The following deployment labels are present in `image_data` but not `deployments`: "21_1_20230605", "2022-11-10", and "2023-01-10"</span></span>
<span><span class="co">#&gt; ! The following deployment labels are present in `deployments` but not `image_data`: "21_20230605", "19_1_20231107", "19_2_20231107", "20_20231107", "21_20231107", "21_2_20231108", "25_20231031", "26_20231031", "27_20231031", "28_20231031", "29_1_20231031", "29_2_20231031", "29_3_20231107", and "31_20231107"</span></span></code></pre></div>
<p>Use <code><a href="reference/merge_deployments_images.html">merge_deployments_images()</a></code> to join the deployment metadata to the images:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">images_with_metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/merge_deployments_images.html">merge_deployments_images</a></span><span class="op">(</span><span class="va">deployments</span>, <span class="va">image_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; ! The following deployment labels are present in `image_data` but not `deployments`: "21_1_20230605", "2022-11-10", and "2023-01-10"</span></span>
<span><span class="co">#&gt; ! The following deployment labels are present in `deployments` but not `image_data`: "21_20230605", "19_1_20231107", "19_2_20231107", "20_20231107", "21_20231107", "21_2_20231108", "25_20231031", "26_20231031", "27_20231031", "28_20231031", "29_1_20231031", "29_2_20231031", "29_3_20231107", and "31_20231107"</span></span>
<span><span class="va">images_with_metadata</span></span>
<span><span class="co">#&gt; Simple feature collection with 11833 features and 102 fields (with 1208 geometries empty)</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -130.3966 ymin: 52.92237 xmax: -129.569 ymax: 52.96732</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; # A tibble: 11,833 × 97</span></span>
<span><span class="co">#&gt;    root_folder deployment_label date_time           episode species</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;            &lt;dttm&gt;              &lt;chr&gt;   &lt;chr&gt;  </span></span>
<span><span class="co">#&gt;  1 100RECNX    19_1_20230605    2022-11-10 15:15:53 1:1|5   &lt;NA&gt;   </span></span>
<span><span class="co">#&gt;  2 100RECNX    19_1_20230605    2022-11-10 15:15:58 1:2|5   &lt;NA&gt;   </span></span>
<span><span class="co">#&gt;  3 100RECNX    19_1_20230605    2022-11-10 15:16:25 1:3|5   &lt;NA&gt;   </span></span>
<span><span class="co">#&gt;  4 100RECNX    19_1_20230605    2022-11-10 15:16:27 1:4|5   &lt;NA&gt;   </span></span>
<span><span class="co">#&gt;  5 100RECNX    19_1_20230605    2022-11-10 15:16:31 1:5|5   &lt;NA&gt;   </span></span>
<span><span class="co">#&gt;  6 100RECNX    19_1_20230605    2022-11-11 12:00:00 2:1|1   &lt;NA&gt;   </span></span>
<span><span class="co">#&gt;  7 100RECNX    19_1_20230605    2022-11-12 12:00:00 3:1|1   &lt;NA&gt;   </span></span>
<span><span class="co">#&gt;  8 100RECNX    19_1_20230605    2022-11-13 12:00:00 4:1|1   &lt;NA&gt;   </span></span>
<span><span class="co">#&gt;  9 100RECNX    19_1_20230605    2022-11-14 12:00:00 5:1|1   &lt;NA&gt;   </span></span>
<span><span class="co">#&gt; 10 100RECNX    19_1_20230605    2022-11-15 12:00:00 6:1|1   &lt;NA&gt;   </span></span>
<span><span class="co">#&gt; # ℹ 11,823 more rows</span></span>
<span><span class="co">#&gt; # ℹ 92 more variables: total_count_episode &lt;dbl&gt;, obj_count_image &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   adult_male &lt;int&gt;, adult_female &lt;int&gt;, adult_unclassified_sex &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   yearling_male &lt;int&gt;, yearling_female &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   yearling_unclassified_sex &lt;int&gt;, young_of_year_unclassified_sex &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   juvenile_unclassified_sex &lt;int&gt;, male_unclassified_age &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   female_unclassified_age &lt;int&gt;, unclassified_life_stage_and_sex &lt;int&gt;, …</span></span></code></pre></div>
<div class="section level4">
<h4 id="image-data-qa">Image Data QA<a class="anchor" aria-label="anchor" href="#image-data-qa"></a>
</h4>
<p>There are a number of common data quality issues that we can check for in the image data itself, aside from those addressed above when reconciling deployments and images.</p>
<p>We can use the <code><a href="reference/qa_image_data.html">qa_image_data()</a></code> function to detect the following problems:</p>
<ul>
<li>Check for blanks in key fields: study area, station label, deployment date, surveyor, trigger mode, temperature, episode</li>
<li>Species detected with no count data</li>
<li>Count data with no species</li>
<li>Sum of individual count fields equals Total Count</li>
<li>Multiple entries under same Episode number (indicating possible double entry)</li>
<li>Ensure dates for timelapse images are continuous and in order.</li>
<li>Snow data
<ul>
<li>No blanks unless lens obscured is <code>TRUE</code>
</li>
<li>Look for snow depth outliers (e.g., 10, 10, 110, 10, 15, 20)</li>
</ul>
</li>
</ul>
<p>Run the <code><a href="reference/qa_image_data.html">qa_image_data()</a></code> function:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">image_data_qa</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/qa_image_data.html">qa_image_data</a></span><span class="op">(</span><span class="va">image_data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">image_data_qa</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 24 55</span></span></code></pre></div>
<p>We can see that this has identified 24 records with potential problems. This dataset has a number of fields starting with <code>QA_</code> which help us know which images we should have a closer look at. All of the original fields, plus any <code>QA_</code> fields that have at least one <code>TRUE</code> value are returned:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">image_data_qa</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "root_folder"                     "study_area_name"                </span></span>
<span><span class="co">#&gt;  [3] "sample_station_label"            "deployment_label"               </span></span>
<span><span class="co">#&gt;  [5] "date_time"                       "episode_num"                    </span></span>
<span><span class="co">#&gt;  [7] "episode"                         "species"                        </span></span>
<span><span class="co">#&gt;  [9] "total_count_episode"             "obj_count_image"                </span></span>
<span><span class="co">#&gt; [11] "adult_male"                      "adult_female"                   </span></span>
<span><span class="co">#&gt; [13] "adult_unclassified_sex"          "yearling_male"                  </span></span>
<span><span class="co">#&gt; [15] "yearling_female"                 "yearling_unclassified_sex"      </span></span>
<span><span class="co">#&gt; [17] "young_of_year_unclassified_sex"  "juvenile_unclassified_sex"      </span></span>
<span><span class="co">#&gt; [19] "male_unclassified_age"           "female_unclassified_age"        </span></span>
<span><span class="co">#&gt; [21] "unclassified_life_stage_and_sex" "antler_class"                   </span></span>
<span><span class="co">#&gt; [23] "animal_identifiable"             "animal_tagged"                  </span></span>
<span><span class="co">#&gt; [25] "behaviour_1"                     "behaviour_2"                    </span></span>
<span><span class="co">#&gt; [27] "behaviour_3"                     "human_use_type"                 </span></span>
<span><span class="co">#&gt; [29] "human_transport_mode"            "temperature"                    </span></span>
<span><span class="co">#&gt; [31] "snow_depth"                      "snow_index"                     </span></span>
<span><span class="co">#&gt; [33] "snow_is_est"                     "snow_depth_lower"               </span></span>
<span><span class="co">#&gt; [35] "snow_depth_upper"                "lens_obscured"                  </span></span>
<span><span class="co">#&gt; [37] "starred"                         "needs_review"                   </span></span>
<span><span class="co">#&gt; [39] "comment"                         "surveyor"                       </span></span>
<span><span class="co">#&gt; [41] "trigger_mode"                    "file"                           </span></span>
<span><span class="co">#&gt; [43] "relative_path"                   "delete_flag"                    </span></span>
<span><span class="co">#&gt; [45] "QA_BLANK_study_area_name"        "QA_BLANK_sample_station_label"  </span></span>
<span><span class="co">#&gt; [47] "QA_BLANK_deployment_label"       "QA_BLANK_date_time"             </span></span>
<span><span class="co">#&gt; [49] "QA_BLANK_surveyor"               "QA_BLANK_trigger_mode"          </span></span>
<span><span class="co">#&gt; [51] "QA_BLANK_temperature"            "QA_BLANK_episode"               </span></span>
<span><span class="co">#&gt; [53] "QA_timelapse_lag"                "QA_wrong_tl_time"               </span></span>
<span><span class="co">#&gt; [55] "QA_snow_outlier"</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">select</span><span class="op">(</span><span class="va">image_data_qa</span>, <span class="va">root_folder</span>, <span class="va">file</span>, <span class="fu">starts_with</span><span class="op">(</span><span class="st">"QA_"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 24 × 13</span></span>
<span><span class="co">#&gt;    root_folder   file         QA_BLANK_study_area_name QA_BLANK_sample_station…¹</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;        &lt;lgl&gt;                    &lt;lgl&gt;                    </span></span>
<span><span class="co">#&gt;  1 27_20230605   RCNX0030.JPG FALSE                    FALSE                    </span></span>
<span><span class="co">#&gt;  2 100RECNX      RCNX0114.JPG FALSE                    FALSE                    </span></span>
<span><span class="co">#&gt;  3 100RECNX      RCNX0118.JPG FALSE                    FALSE                    </span></span>
<span><span class="co">#&gt;  4 21_2_20230605 RCNX0010.JPG FALSE                    FALSE                    </span></span>
<span><span class="co">#&gt;  5 100RECNX      RCNX0261.JPG FALSE                    FALSE                    </span></span>
<span><span class="co">#&gt;  6 100RECNX      RCNX0339.JPG FALSE                    FALSE                    </span></span>
<span><span class="co">#&gt;  7 100RECNX      RCNX0376.JPG FALSE                    FALSE                    </span></span>
<span><span class="co">#&gt;  8 29_2_20230605 IMG_0252.JPG FALSE                    FALSE                    </span></span>
<span><span class="co">#&gt;  9 100RECNX      IMG_0134.JPG FALSE                    FALSE                    </span></span>
<span><span class="co">#&gt; 10 102RECNX      RCNX0041.JPG FALSE                    FALSE                    </span></span>
<span><span class="co">#&gt; # ℹ 14 more rows</span></span>
<span><span class="co">#&gt; # ℹ abbreviated name: ¹​QA_BLANK_sample_station_label</span></span>
<span><span class="co">#&gt; # ℹ 9 more variables: QA_BLANK_deployment_label &lt;lgl&gt;,</span></span>
<span><span class="co">#&gt; #   QA_BLANK_date_time &lt;lgl&gt;, QA_BLANK_surveyor &lt;lgl&gt;,</span></span>
<span><span class="co">#&gt; #   QA_BLANK_trigger_mode &lt;lgl&gt;, QA_BLANK_temperature &lt;lgl&gt;,</span></span>
<span><span class="co">#&gt; #   QA_BLANK_episode &lt;lgl&gt;, QA_timelapse_lag &lt;lgl&gt;, QA_wrong_tl_time &lt;lgl&gt;,</span></span>
<span><span class="co">#&gt; #   QA_snow_outlier &lt;lgl&gt;</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="built-in-plotting-functions">Built-in plotting functions<a class="anchor" aria-label="anchor" href="#built-in-plotting-functions"></a>
</h3>
<p>There are several plotting functions available to help you visualize your data and spot any potential problems. By default, all plots render as static images, but can be created as interactive plots by setting <code>interactive = TRUE</code>. Interactive plots are not shown here as they don’t render in the <code>README</code>.</p>
<div class="section level4">
<h4 id="deployment-plot">Deployment plot<a class="anchor" aria-label="anchor" href="#deployment-plot"></a>
</h4>
<p>We can plot deployments to see that the start and ends of our deployments are as expected, and flag any “invalid” deployments (i.e., where we don’t know the end time because a camera was stolen, bumped, ran out of batteries etc.). You can make static or interactive plots:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_deployments.html">plot_deployments</a></span><span class="op">(</span><span class="va">deployments</span>, date_breaks <span class="op">=</span> <span class="st">"2 months"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-plot-deployments-1.png" width="100%"></p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot_deployments(deployments, interactive = TRUE, date_breaks = "2 months")</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="snow-depth-plot">Snow depth plot<a class="anchor" aria-label="anchor" href="#snow-depth-plot"></a>
</h4>
<p>We can plot the recorded snow depths across deployments using the <code><a href="reference/plot_snow.html">plot_snow()</a></code> function with our image data:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_snow.html">plot_snow</a></span><span class="op">(</span><span class="va">image_data</span>, date_breaks <span class="op">=</span> <span class="st">"2 months"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 109 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_interactive_point()`).</span></span></code></pre></div>
<p><img src="reference/figures/README-plot-snow-1.png" width="100%"></p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot_snow(image_data, date_breaks = "2 months", interactive = TRUE)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="detection-plot">Detection plot<a class="anchor" aria-label="anchor" href="#detection-plot"></a>
</h4>
<p>We can also plot image timestamps over the deployment durations to alert us to potential time mismatches between the session data and image time labels. Mismatches could indicate wrong time settings on cameras, errors in deployment labels (as the below indicates), or any number of data entry errors.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_deployment_detections.html">plot_deployment_detections</a></span><span class="op">(</span><span class="va">deployments</span>, <span class="va">image_data</span>, date_breaks <span class="op">=</span> <span class="st">"2 months"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-plot-detections-1.png" width="100%"></p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot_deployment_detections(deployments, image_data, interactive = TRUE, date_breaks = "2 months")</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="daily-detection-patterns">Daily detection patterns<a class="anchor" aria-label="anchor" href="#daily-detection-patterns"></a>
</h4>
<p>We can plot the patterns of daily detections by species:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_diel_activity.html">plot_diel_activity</a></span><span class="op">(</span><span class="va">image_data</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-plot-diel-1.png" width="100%"></p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot_diel_activity(image_data, interactive = TRUE)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="sampling-sessions">Sampling sessions<a class="anchor" aria-label="anchor" href="#sampling-sessions"></a>
</h3>
<p>Define sampling sessions based on image data using the <code><a href="reference/make_sample_sessions.html">make_sample_sessions()</a></code> function. This function will:</p>
<ul>
<li>Set sampling_start as deployment_start</li>
<li>Notes dates of first and last photos of deployment</li>
<li>Counts photos (total, and motion-detection)</li>
<li>Determines if the sampling period is less than the deployment period</li>
<li>Determines gaps in sampling period due to obscured lens</li>
<li>Determines total length of sample period (last photo date - first photo date - number of days with lens obscured)</li>
</ul>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/make_sample_sessions.html">make_sample_sessions</a></span><span class="op">(</span><span class="va">image_data</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="co">#&gt; # A tibble: 17 × 13</span></span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="co">#&gt;    deployment_label sample_start_date sample_end_date n_photos n_photos_spp_id</span></span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;            &lt;date&gt;            &lt;date&gt;             &lt;int&gt;           &lt;int&gt;</span></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a><span class="co">#&gt;  1 19_1_20230605    2022-11-10        2023-06-05           285              11</span></span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a><span class="co">#&gt;  2 19_2_20230605    2022-11-15        2023-06-05           411              26</span></span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a><span class="co">#&gt;  3 20_20230605      2022-11-10        2023-06-05          1857             101</span></span>
<span id="cb36-7"><a href="#cb36-7" tabindex="-1"></a><span class="co">#&gt;  4 21_1_20230605    2022-11-10        2023-06-05           959              78</span></span>
<span id="cb36-8"><a href="#cb36-8" tabindex="-1"></a><span class="co">#&gt;  5 21_2_20230605    2022-11-18        2023-06-05           569              23</span></span>
<span id="cb36-9"><a href="#cb36-9" tabindex="-1"></a><span class="co">#&gt;  6 24_20230708      2022-11-18        2023-07-08           521              18</span></span>
<span id="cb36-10"><a href="#cb36-10" tabindex="-1"></a><span class="co">#&gt;  7 25_20230710      2022-11-18        2023-07-10          3554              24</span></span>
<span id="cb36-11"><a href="#cb36-11" tabindex="-1"></a><span class="co">#&gt;  8 26_20230710      2022-11-07        2023-07-10           621              50</span></span>
<span id="cb36-12"><a href="#cb36-12" tabindex="-1"></a><span class="co">#&gt;  9 27_20230605      2022-11-07        2023-06-05           259               7</span></span>
<span id="cb36-13"><a href="#cb36-13" tabindex="-1"></a><span class="co">#&gt; 10 28_20230605      2022-11-15        2023-06-05           566              14</span></span>
<span id="cb36-14"><a href="#cb36-14" tabindex="-1"></a><span class="co">#&gt; 11 29_1_20230605    2022-11-07        2023-06-05           390              10</span></span>
<span id="cb36-15"><a href="#cb36-15" tabindex="-1"></a><span class="co">#&gt; 12 2022-11-10       2022-11-07        2022-11-10            52               5</span></span>
<span id="cb36-16"><a href="#cb36-16" tabindex="-1"></a><span class="co">#&gt; 13 29_2_20230605    2022-11-10        2023-06-05           530              34</span></span>
<span id="cb36-17"><a href="#cb36-17" tabindex="-1"></a><span class="co">#&gt; 14 29_3_20230605    2022-11-18        2023-06-05           419              15</span></span>
<span id="cb36-18"><a href="#cb36-18" tabindex="-1"></a><span class="co">#&gt; 15 2023-01-10       2022-11-15        2023-01-10           197               8</span></span>
<span id="cb36-19"><a href="#cb36-19" tabindex="-1"></a><span class="co">#&gt; 16 31_20230605      2023-01-25        2023-06-05           382              15</span></span>
<span id="cb36-20"><a href="#cb36-20" tabindex="-1"></a><span class="co">#&gt; 17 35_20230708      2022-11-18        2023-07-08           261               3</span></span>
<span id="cb36-21"><a href="#cb36-21" tabindex="-1"></a><span class="co">#&gt; # ℹ 8 more variables: n_species &lt;int&gt;, n_individuals &lt;dbl&gt;,</span></span>
<span id="cb36-22"><a href="#cb36-22" tabindex="-1"></a><span class="co">#&gt; #   n_motion_photos &lt;int&gt;, n_motion_photos_lens_obscured &lt;int&gt;,</span></span>
<span id="cb36-23"><a href="#cb36-23" tabindex="-1"></a><span class="co">#&gt; #   n_tl_photos &lt;int&gt;, n_tl_photos_lens_obscured &lt;int&gt;, sample_gaps &lt;lgl&gt;,</span></span>
<span id="cb36-24"><a href="#cb36-24" tabindex="-1"></a><span class="co">#&gt; #   trap_days &lt;int&gt;</span></span></code></pre></div>
<p>You can set custom start and end dates for your sample session as well:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/make_sample_sessions.html">make_sample_sessions</a></span><span class="op">(</span></span>
<span>  <span class="va">image_data</span>, </span>
<span>  sample_start_date <span class="op">=</span> <span class="st">"2022-12-01"</span>, </span>
<span>  sample_end_date <span class="op">=</span> <span class="st">"2023-04-30"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb38"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="co">#&gt; # A tibble: 16 × 13</span></span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a><span class="co">#&gt;    deployment_label sample_start_date sample_end_date n_photos n_photos_spp_id</span></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;            &lt;date&gt;            &lt;date&gt;             &lt;int&gt;           &lt;int&gt;</span></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a><span class="co">#&gt;  1 19_1_20230605    2022-12-01        2023-04-30           191               6</span></span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a><span class="co">#&gt;  2 19_2_20230605    2022-12-01        2023-04-30           290              16</span></span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a><span class="co">#&gt;  3 20_20230605      2022-12-01        2023-04-30           662              31</span></span>
<span id="cb38-7"><a href="#cb38-7" tabindex="-1"></a><span class="co">#&gt;  4 21_1_20230605    2022-12-01        2023-04-30           684              62</span></span>
<span id="cb38-8"><a href="#cb38-8" tabindex="-1"></a><span class="co">#&gt;  5 21_2_20230605    2022-12-01        2023-04-30           450              15</span></span>
<span id="cb38-9"><a href="#cb38-9" tabindex="-1"></a><span class="co">#&gt;  6 24_20230708      2022-12-01        2023-04-30           166               3</span></span>
<span id="cb38-10"><a href="#cb38-10" tabindex="-1"></a><span class="co">#&gt;  7 25_20230710      2022-12-01        2023-04-30           165               0</span></span>
<span id="cb38-11"><a href="#cb38-11" tabindex="-1"></a><span class="co">#&gt;  8 26_20230710      2022-12-01        2023-04-30           163               1</span></span>
<span id="cb38-12"><a href="#cb38-12" tabindex="-1"></a><span class="co">#&gt;  9 27_20230605      2022-12-01        2023-04-30           152               1</span></span>
<span id="cb38-13"><a href="#cb38-13" tabindex="-1"></a><span class="co">#&gt; 10 28_20230605      2022-12-01        2023-04-30           162               3</span></span>
<span id="cb38-14"><a href="#cb38-14" tabindex="-1"></a><span class="co">#&gt; 11 29_1_20230605    2022-12-01        2023-04-30           241               5</span></span>
<span id="cb38-15"><a href="#cb38-15" tabindex="-1"></a><span class="co">#&gt; 12 29_2_20230605    2022-12-01        2023-04-30           415              18</span></span>
<span id="cb38-16"><a href="#cb38-16" tabindex="-1"></a><span class="co">#&gt; 13 29_3_20230605    2022-12-01        2023-04-30           226               5</span></span>
<span id="cb38-17"><a href="#cb38-17" tabindex="-1"></a><span class="co">#&gt; 14 2023-01-10       2022-12-01        2023-01-10            95               4</span></span>
<span id="cb38-18"><a href="#cb38-18" tabindex="-1"></a><span class="co">#&gt; 15 31_20230605      2023-01-25        2023-04-30           311               8</span></span>
<span id="cb38-19"><a href="#cb38-19" tabindex="-1"></a><span class="co">#&gt; 16 35_20230708      2022-12-01        2023-04-30           152               0</span></span>
<span id="cb38-20"><a href="#cb38-20" tabindex="-1"></a><span class="co">#&gt; # ℹ 8 more variables: n_species &lt;int&gt;, n_individuals &lt;dbl&gt;,</span></span>
<span id="cb38-21"><a href="#cb38-21" tabindex="-1"></a><span class="co">#&gt; #   n_motion_photos &lt;int&gt;, n_motion_photos_lens_obscured &lt;int&gt;,</span></span>
<span id="cb38-22"><a href="#cb38-22" tabindex="-1"></a><span class="co">#&gt; #   n_tl_photos &lt;int&gt;, n_tl_photos_lens_obscured &lt;int&gt;, sample_gaps &lt;lgl&gt;,</span></span>
<span id="cb38-23"><a href="#cb38-23" tabindex="-1"></a><span class="co">#&gt; #   trap_days &lt;int&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="analysis-data">Analysis data<a class="anchor" aria-label="anchor" href="#analysis-data"></a>
</h3>
<div class="section level4">
<h4 id="relative-abundance-index-rai">Relative Abundance Index (RAI)<a class="anchor" aria-label="anchor" href="#relative-abundance-index-rai"></a>
</h4>
<p>Calculate Relative Abundance Index for sample sessions using <code><a href="reference/sample_rai.html">sample_rai()</a></code>. By default, it calculates RAI per species using the sample start and end dates in the data for each deployment:</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/sample_rai.html">sample_rai</a></span><span class="op">(</span><span class="va">image_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 53 × 7</span></span>
<span><span class="co">#&gt;    deployment_label sample_start_date sample_end_date trap_days species      </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;            &lt;date&gt;            &lt;date&gt;              &lt;int&gt; &lt;chr&gt;        </span></span>
<span><span class="co">#&gt;  1 19_1_20230605    2022-11-10        2023-06-05            207 Black Bear   </span></span>
<span><span class="co">#&gt;  2 19_1_20230605    2022-11-10        2023-06-05            207 Cougar       </span></span>
<span><span class="co">#&gt;  3 19_1_20230605    2022-11-10        2023-06-05            207 Roosevelt Elk</span></span>
<span><span class="co">#&gt;  4 19_2_20230605    2022-11-15        2023-06-05            201 Black Bear   </span></span>
<span><span class="co">#&gt;  5 19_2_20230605    2022-11-15        2023-06-05            201 Mule Deer    </span></span>
<span><span class="co">#&gt;  6 19_2_20230605    2022-11-15        2023-06-05            201 Roosevelt Elk</span></span>
<span><span class="co">#&gt;  7 2022-11-10       2022-11-07        2022-11-10              3 Mule Deer    </span></span>
<span><span class="co">#&gt;  8 2022-11-10       2022-11-07        2022-11-10              3 Roosevelt Elk</span></span>
<span><span class="co">#&gt;  9 2023-01-10       2022-11-15        2023-01-10             56 Cougar       </span></span>
<span><span class="co">#&gt; 10 2023-01-10       2022-11-15        2023-01-10             56 Roosevelt Elk</span></span>
<span><span class="co">#&gt; # ℹ 43 more rows</span></span>
<span><span class="co">#&gt; # ℹ 2 more variables: total_count &lt;dbl&gt;, rai &lt;dbl&gt;</span></span></code></pre></div>
<p>You can set it to do a subset of species and/or deployment labels, and similar to <code><a href="reference/make_sample_sessions.html">make_sample_sessions()</a></code>, set custom session start and end dates:</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/sample_rai.html">sample_rai</a></span><span class="op">(</span></span>
<span>  <span class="va">image_data</span>, </span>
<span>  species <span class="op">=</span> <span class="st">"Roosevelt Elk"</span>, </span>
<span>  deployment_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"19_2_20230605"</span>, <span class="st">"29_1_20230605"</span><span class="op">)</span>,</span>
<span>  sample_start_date <span class="op">=</span> <span class="st">"2022-12-01"</span>, </span>
<span>  sample_end_date <span class="op">=</span> <span class="st">"2023-04-30"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 7</span></span>
<span><span class="co">#&gt;   deployment_label sample_start_date sample_end_date trap_days species      </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;            &lt;date&gt;            &lt;date&gt;              &lt;int&gt; &lt;chr&gt;        </span></span>
<span><span class="co">#&gt; 1 19_2_20230605    2022-12-01        2023-04-30            151 Roosevelt Elk</span></span>
<span><span class="co">#&gt; 2 29_1_20230605    2022-12-01        2023-04-30            148 Roosevelt Elk</span></span>
<span><span class="co">#&gt; # ℹ 2 more variables: total_count &lt;dbl&gt;, rai &lt;dbl&gt;</span></span></code></pre></div>
<p>You can also calculate RAI across all deployments by setting <code>by_deployment = FALSE</code>:</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/sample_rai.html">sample_rai</a></span><span class="op">(</span></span>
<span>  <span class="va">image_data</span>, </span>
<span>  species <span class="op">=</span> <span class="st">"Roosevelt Elk"</span>, </span>
<span>  by_deployment <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sample_start_date <span class="op">=</span> <span class="st">"2022-12-01"</span>, </span>
<span>  sample_end_date <span class="op">=</span> <span class="st">"2023-04-30"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 6</span></span>
<span><span class="co">#&gt;   sample_start_date sample_end_date trap_days species       total_count   rai</span></span>
<span><span class="co">#&gt;   &lt;date&gt;            &lt;date&gt;              &lt;int&gt; &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 2022-12-01        2023-04-30            151 Roosevelt Elk         146 0.967</span></span></code></pre></div>
<p>We can compare total count and RAI across species:</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">spp_comp</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sample_rai.html">sample_rai</a></span><span class="op">(</span></span>
<span>  <span class="va">image_data</span>, </span>
<span>  by_deployment <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  by_species <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sample_start_date <span class="op">=</span> <span class="st">"2022-12-01"</span>, </span>
<span>  sample_end_date <span class="op">=</span> <span class="st">"2023-04-30"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">spp_comp</span></span>
<span><span class="co">#&gt; # A tibble: 7 × 6</span></span>
<span><span class="co">#&gt;   sample_start_date sample_end_date trap_days species        total_count     rai</span></span>
<span><span class="co">#&gt;   &lt;date&gt;            &lt;date&gt;              &lt;int&gt; &lt;chr&gt;                &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 2022-12-01        2023-04-30            131 Avian (commen…           1 0.00763</span></span>
<span><span class="co">#&gt; 2 2022-12-01        2023-04-30            151 Black Bear              28 0.185  </span></span>
<span><span class="co">#&gt; 3 2022-12-01        2023-04-30            151 Cougar                   8 0.0530 </span></span>
<span><span class="co">#&gt; 4 2022-12-01        2023-04-30            151 Mule Deer              105 0.695  </span></span>
<span><span class="co">#&gt; 5 2022-12-01        2023-04-30            131 Other (commen…           1 0.00763</span></span>
<span><span class="co">#&gt; 6 2022-12-01        2023-04-30            151 Pacific Marten           2 0.0132 </span></span>
<span><span class="co">#&gt; 7 2022-12-01        2023-04-30            151 Roosevelt Elk          146 0.967</span></span></code></pre></div>
<p>Using the <a href="https://ggplot2.tidyverse.org/" class="external-link">ggplot2</a> package, we can plot this:</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">spp_comp</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">rai</span>, y <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"darkgreen"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">total_count</span><span class="op">)</span>, nudge_x <span class="op">=</span> <span class="fl">0.05</span>, nudge_y <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"RAI of all species detected, across all deployments"</span>, </span>
<span>       caption <span class="op">=</span> <span class="st">"Numbers beside points represent total number of individuals detected"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Relative Abundance Index"</span>, y <span class="op">=</span> <span class="st">"Species"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-sample-rai4-plot-1.png" width="100%"></p>
<p>We can group by deployment to compare across deployments:</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">spp_comp_by_dep</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sample_rai.html">sample_rai</a></span><span class="op">(</span></span>
<span>  <span class="va">image_data</span>, </span>
<span>  by_deployment <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  by_species <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sample_start_date <span class="op">=</span> <span class="st">"2022-12-01"</span>, </span>
<span>  sample_end_date <span class="op">=</span> <span class="st">"2023-04-30"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">spp_comp_by_dep</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">rai</span>, y <span class="op">=</span> <span class="va">species</span>, colour <span class="op">=</span> <span class="va">deployment_label</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">total_count</span><span class="op">)</span>, nudge_x <span class="op">=</span> <span class="fl">0.01</span>, nudge_y <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"RAI of all species detected, across all deployments"</span>, </span>
<span>       caption <span class="op">=</span> <span class="st">"Numbers beside points represent total number of individuals detected"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Relative Abundance Index"</span>, y <span class="op">=</span> <span class="st">"Species"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-sample-rai-5-1.png" width="100%"></p>
</div>
<div class="section level4">
<h4 id="relative-abundance-index-rai-over-time">Relative Abundance Index (RAI) over time<a class="anchor" aria-label="anchor" href="#relative-abundance-index-rai-over-time"></a>
</h4>
<p>Use <code><a href="reference/rai_by_time.html">rai_by_time()</a></code> to calculate RAI over a time window, optionally calculating statistics using a moving window aggregation. You can calculate daily statistics, or aggregate by week, month, or year. By default, it calculates daily metrics, aggregating across deployments.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rai_by_time.html">rai_by_time</a></span><span class="op">(</span><span class="va">image_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2,205 × 8</span></span>
<span><span class="co">#&gt;    species          study_area_name date       max_snow_index mean_temperature</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;            &lt;chr&gt;           &lt;date&gt;              &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Avian (comments) Test Project    2022-11-07              2             6   </span></span>
<span><span class="co">#&gt;  2 Avian (comments) Test Project    2022-11-08              2            -1.75</span></span>
<span><span class="co">#&gt;  3 Avian (comments) Test Project    2022-11-09              2            -3.25</span></span>
<span><span class="co">#&gt;  4 Avian (comments) Test Project    2022-11-10              2             1.2 </span></span>
<span><span class="co">#&gt;  5 Avian (comments) Test Project    2022-11-11              2             1   </span></span>
<span><span class="co">#&gt;  6 Avian (comments) Test Project    2022-11-12              2             1.57</span></span>
<span><span class="co">#&gt;  7 Avian (comments) Test Project    2022-11-13              2             2.57</span></span>
<span><span class="co">#&gt;  8 Avian (comments) Test Project    2022-11-14              2             1.71</span></span>
<span><span class="co">#&gt;  9 Avian (comments) Test Project    2022-11-15              2             0.5 </span></span>
<span><span class="co">#&gt; 10 Avian (comments) Test Project    2022-11-16              2            -1   </span></span>
<span><span class="co">#&gt; # ℹ 2,195 more rows</span></span>
<span><span class="co">#&gt; # ℹ 3 more variables: total_count &lt;dbl&gt;, trap_days &lt;int&gt;, rai &lt;dbl&gt;</span></span></code></pre></div>
<p>We can select a single species, and calculate daily rolling values. The default window size is 7, but it can be changed with the <code>k</code> parameter.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">elk_roll_avg</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/rai_by_time.html">rai_by_time</a></span><span class="op">(</span></span>
<span>  <span class="va">image_data</span>, </span>
<span>  by <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  species <span class="op">=</span> <span class="st">"Roosevelt Elk"</span>,</span>
<span>  roll <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">elk_roll_avg</span></span>
<span><span class="co">#&gt; # A tibble: 245 × 13</span></span>
<span><span class="co">#&gt;    species       study_area_name date       max_snow_index mean_temperature</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;           &lt;date&gt;              &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Roosevelt Elk Test Project    2022-11-07              2             6   </span></span>
<span><span class="co">#&gt;  2 Roosevelt Elk Test Project    2022-11-08              2            -1.75</span></span>
<span><span class="co">#&gt;  3 Roosevelt Elk Test Project    2022-11-09              2            -3.25</span></span>
<span><span class="co">#&gt;  4 Roosevelt Elk Test Project    2022-11-10              2             1.2 </span></span>
<span><span class="co">#&gt;  5 Roosevelt Elk Test Project    2022-11-11              2             1   </span></span>
<span><span class="co">#&gt;  6 Roosevelt Elk Test Project    2022-11-12              2             1.57</span></span>
<span><span class="co">#&gt;  7 Roosevelt Elk Test Project    2022-11-13              2             2.57</span></span>
<span><span class="co">#&gt;  8 Roosevelt Elk Test Project    2022-11-14              2             1.71</span></span>
<span><span class="co">#&gt;  9 Roosevelt Elk Test Project    2022-11-15              2             0.5 </span></span>
<span><span class="co">#&gt; 10 Roosevelt Elk Test Project    2022-11-16              2            -1   </span></span>
<span><span class="co">#&gt; # ℹ 235 more rows</span></span>
<span><span class="co">#&gt; # ℹ 8 more variables: total_count &lt;dbl&gt;, trap_days &lt;int&gt;, rai &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   roll_mean_max_snow &lt;dbl&gt;, roll_mean_temp &lt;dbl&gt;, roll_trap_days &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   roll_count &lt;dbl&gt;, roll_rai &lt;dbl&gt;</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">elk_roll_avg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">roll_rai</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"darkgreen"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Rolling seven day average of Elk RAI"</span>, </span>
<span>    x <span class="op">=</span> <span class="st">"Date"</span>, </span>
<span>    y <span class="op">=</span> <span class="st">"7 day rolling average RAI"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 6 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_line()`).</span></span></code></pre></div>
<p><img src="reference/figures/README-rai-by-time2-1.png" width="100%"></p>
<p>Since the data returned by <code>rai_by_time</code> also includes snow and temperature data, we can plot these, and then compare RAI to these environment variables:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">elk_roll_avg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">roll_mean_max_snow</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"darkblue"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Rolling seven day average of average maximum snow index across sites"</span>, </span>
<span>    x <span class="op">=</span> <span class="st">"Date"</span>, </span>
<span>    y <span class="op">=</span> <span class="st">"7 day rolling average of maximum snow index"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 6 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_line()`).</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-27-1.png" width="100%"></p>
<p>We can change the way snow measurements are aggregated across sites when <code>by_deployment = FALSE</code>. By default it uses <code>max</code>, but we can set it to any aggregation function, like <code>mean</code>:</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">elk_roll_avg</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/rai_by_time.html">rai_by_time</a></span><span class="op">(</span></span>
<span>  <span class="va">image_data</span>, </span>
<span>  by <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  species <span class="op">=</span> <span class="st">"Roosevelt Elk"</span>,</span>
<span>  roll <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  snow_agg <span class="op">=</span> <span class="va">mean</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">elk_roll_avg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">roll_mean_mean_snow</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"darkblue"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Rolling seven day average of mean snow index across sites"</span>, </span>
<span>    x <span class="op">=</span> <span class="st">"Date"</span>, </span>
<span>    y <span class="op">=</span> <span class="st">"7 day rolling average of mean snow index"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 6 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_line()`).</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-28-1.png" width="100%"></p>
<p>And we can compare Elk activity to snow levels:</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">elk_roll_avg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">roll_mean_mean_snow</span>, y <span class="op">=</span> <span class="va">roll_rai</span>, colour <span class="op">=</span> <span class="va">mean_temperature</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_colour_viridis_c</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"inferno"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Rolling seven day average of Elk RAI compared to Snow Index"</span>, </span>
<span>    x <span class="op">=</span> <span class="st">"7 day rolling average of mean Snow Index across sites"</span>, </span>
<span>    y <span class="op">=</span> <span class="st">"7 day rolling average RAI"</span>,</span>
<span>    colour <span class="op">=</span> <span class="st">"Temperature"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 6 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_point()`).</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-29-1.png" width="100%"></p>
<p>And temperature:</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">elk_roll_avg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">roll_mean_temp</span>, y <span class="op">=</span> <span class="va">roll_rai</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Rolling seven day average of Elk RAI compared to Temperature"</span>, </span>
<span>    x <span class="op">=</span> <span class="st">"7 day rolling average of mean temperature across sites"</span>, </span>
<span>    y <span class="op">=</span> <span class="st">"7 day rolling average RAI"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 6 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_point()`).</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-30-1.png" width="100%"></p>
<p>We can compare raw counts vs snow depth across deployments. Note that for daily counts (<code>by = "date"</code>) when <code>by_deployment = TRUE</code>, the “trap_days” in each row is equal to 1, so RAI is a bit meaningless and we can just compare raw counts:</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">elk_rai_by_dep</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/rai_by_time.html">rai_by_time</a></span><span class="op">(</span></span>
<span>  <span class="va">image_data</span>, </span>
<span>  by <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  species <span class="op">=</span> <span class="st">"Roosevelt Elk"</span>,</span>
<span>  by_deployment <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">elk_rai_by_dep</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">snow_index</span>, y <span class="op">=</span> <span class="va">total_count</span>, colour <span class="op">=</span> <span class="va">deployment_label</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">deployment_label</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-31-1.png" width="100%"></p>
<p>If we want to compare the RAI of two species, we can specify them in the <code>species</code> argument, and colour our plot by species (if we left the <code>species</code> argument blank we would get a line per species, but that looks visually very busy).</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_spp_roll_avg</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/rai_by_time.html">rai_by_time</a></span><span class="op">(</span></span>
<span>  <span class="va">image_data</span>, </span>
<span>  by <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Roosevelt Elk"</span>, <span class="st">"Cougar"</span><span class="op">)</span>,</span>
<span>  by_species <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  roll <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">all_spp_roll_avg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">roll_rai</span>, colour <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Rolling seven day average of RAI for Cougar and Elk"</span>, </span>
<span>    x <span class="op">=</span> <span class="st">"Date"</span>, </span>
<span>    y <span class="op">=</span> <span class="st">"7 day rolling average RAI"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 12 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_line()`).</span></span></code></pre></div>
<p><img src="reference/figures/README-rai-by-time3-1.png" width="100%"></p>
<p>Here we use it to compare the total monthly activity by all species among all deployments:</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">total_rai_by_month</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/rai_by_time.html">rai_by_time</a></span><span class="op">(</span></span>
<span>  <span class="va">image_data</span>, </span>
<span>  by <span class="op">=</span> <span class="st">"month"</span>,</span>
<span>  by_species <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  by_deployment <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">total_rai_by_month</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">month</span>, y <span class="op">=</span> <span class="va">rai</span>, fill <span class="op">=</span> <span class="va">deployment_label</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Monthly RAI of all species"</span>, </span>
<span>    x <span class="op">=</span> <span class="st">"Month"</span>, </span>
<span>    y <span class="op">=</span> <span class="st">"RAI"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-rai-by-time4-1.png" width="100%"></p>
</div>
</div>
<div class="section level3">
<h3 id="write-data-to-spi-template">Write Data to SPI template<a class="anchor" aria-label="anchor" href="#write-data-to-spi-template"></a>
</h3>
<p>bccamtrap also has functionality to write out data to a SPI template for submission.</p>
<p>Use <code><a href="reference/fill_spi_template.html">fill_spi_template()</a></code> to write all of the data to a SPI template, filling in just the default required fields. This will fill in all of the tabs except for the Project Info sheet which you must fill in manually.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/fill_spi_template.html">fill_spi_template</a></span><span class="op">(</span></span>
<span>  <span class="va">sample_stations</span>,</span>
<span>  <span class="va">camera_info</span>, </span>
<span>  <span class="va">camera_setup_checks</span>,</span>
<span>  <span class="va">image_data</span>,</span>
<span>  file <span class="op">=</span> <span class="st">"~/Desktop/SPI_output.xlsx"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>If you want more control, such as adding data to other fields in the SPI template, use <code><a href="reference/write_to_spi_sheet.html">write_to_spi_sheet()</a></code>.</p>
<p>If you want to write to an existing file, specify the same file name in both the <code>file</code> and the <code>template</code> parameters. To write columns other than the default columns, specify paired column names in the form <code>`Destination Column` = data_column</code>. If the left-hand side is a syntactically valid name it can be provided as-is, but if it has spaces in it it must be wrapped in backticks or quotes.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/write_to_spi_sheet.html">write_to_spi_sheet</a></span><span class="op">(</span></span>
<span>  <span class="va">sample_stations</span>,</span>
<span>  file <span class="op">=</span> <span class="st">"~/Desktop/SPI_output.xlsx"</span>,</span>
<span>  `Number of Cameras` <span class="op">=</span> <span class="va">number_of_cameras</span>,</span>
<span>  template <span class="op">=</span> <span class="st">"~/Desktop/SPI_output.xlsx"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="writing-to-spi-template-using-field-form-data">Writing to SPI template using field form data<a class="anchor" aria-label="anchor" href="#writing-to-spi-template-using-field-form-data"></a>
</h4>
<p>To write data imported from field form data, you must use the <code><a href="reference/fill_spi_template_ff.html">fill_spi_template_ff()</a></code> function, passing in both the <code>sample_station_info</code> and <code>deployments</code>, as well as the <code>image_data</code>.</p>
<p>If you want to only write to the metadata tabs and not the Sequence Image Data, you can leave the <code>image_data</code> argument as <code>NULL</code>, and write to the file another time with <code><a href="reference/write_to_spi_sheet.html">write_to_spi_sheet()</a></code>.</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sample_station_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_sample_station_csv.html">read_sample_station_csv</a></span><span class="op">(</span><span class="st">"path-to-sample-stations.csv"</span><span class="op">)</span></span>
<span><span class="va">deployments</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_deployments_csv.html">read_deployments_csv</a></span><span class="op">(</span><span class="st">"path-to-deployments.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/fill_spi_template_ff.html">fill_spi_template_ff</a></span><span class="op">(</span></span>
<span>  <span class="va">sample_stations</span>,</span>
<span>  <span class="va">deployments</span>,</span>
<span>  <span class="va">image_data</span>,</span>
<span>  file <span class="op">=</span> <span class="st">"~/Desktop/SPI_output_from_ff.xlsx"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="project-status">Project Status<a class="anchor" aria-label="anchor" href="#project-status"></a>
</h3>
</div>
<div class="section level3">
<h3 id="getting-help-or-reporting-an-issue">Getting Help or Reporting an Issue<a class="anchor" aria-label="anchor" href="#getting-help-or-reporting-an-issue"></a>
</h3>
<p>To report bugs/issues/feature requests, please file an <a href="https://github.com/bcgov/bccamtrap/issues/" class="external-link">issue</a>.</p>
</div>
<div class="section level3">
<h3 id="how-to-contribute">How to Contribute<a class="anchor" aria-label="anchor" href="#how-to-contribute"></a>
</h3>
<p>If you would like to contribute, please see our <a href="CONTRIBUTING.html">CONTRIBUTING</a> guidelines.</p>
<p>Please note that this project is released with a <a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
<div class="section level3">
<h3 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h3>
<div class="sourceCode" id="cb57"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a>Copyright <span class="dv">2024</span> Province of British Columbia</span>
<span id="cb57-2"><a href="#cb57-2" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" tabindex="-1"></a>Licensed under the Apache License, Version <span class="fl">2.0</span> (the <span class="sc">&amp;</span>quot;License<span class="sc">&amp;</span>quot;);</span>
<span id="cb57-4"><a href="#cb57-4" tabindex="-1"></a>you may not use this file except <span class="cf">in</span> compliance with the License.</span>
<span id="cb57-5"><a href="#cb57-5" tabindex="-1"></a>You may obtain a copy of the License at</span>
<span id="cb57-6"><a href="#cb57-6" tabindex="-1"></a></span>
<span id="cb57-7"><a href="#cb57-7" tabindex="-1"></a>http<span class="sc">:</span><span class="er">//</span>www.apache.org<span class="sc">/</span>licenses<span class="sc">/</span>LICENSE<span class="fl">-2.0</span></span>
<span id="cb57-8"><a href="#cb57-8" tabindex="-1"></a></span>
<span id="cb57-9"><a href="#cb57-9" tabindex="-1"></a>Unless required by applicable law or agreed to <span class="cf">in</span> writing, software distributed under the License is distributed on an <span class="sc">&amp;</span>quot;AS IS<span class="sc">&amp;</span>quot; BASIS,</span>
<span id="cb57-10"><a href="#cb57-10" tabindex="-1"></a>WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span id="cb57-11"><a href="#cb57-11" tabindex="-1"></a>See the License <span class="cf">for</span> the specific language governing permissions and limitations under the License.</span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ateucher/bccamtrap/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/ateucher/bccamtrap/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing bccamtrap</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Andy Teucher <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-7840-692X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ateucher/bccamtrap/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/ateucher/bccamtrap/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://github.com/bcgov/repomountie/blob/master/doc/lifecycle-badges.md" class="external-link"><img src="https://img.shields.io/badge/Lifecycle-Experimental-339999" alt="img"></a></li>
<li><a href="https://app.codecov.io/gh/bcgov/bccamtrap?branch=main" class="external-link"><img src="https://codecov.io/gh/bcgov/bccamtrap/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Andy Teucher.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
